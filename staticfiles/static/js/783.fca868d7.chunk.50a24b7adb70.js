"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[783],{1689:function(e,t,n){var r=n(5861),s=n(7757),a=n.n(s),i=(n(2791),n(6871)),l=n(2806),c=n(184);t.Z=function(e){var t=(0,i.s0)(),n=!!localStorage.getItem("authTokens"),s=function(){var s=(0,r.Z)(a().mark((function r(s){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s.stopPropagation(),n){r.next=5;break}t("/login"),r.next=9;break;case 5:return r.next=7,l.Z.post("like-tweet/".concat(e.tweetId));case 7:201===r.sent.status&&(e.setFakeLikeNumber((function(e){return e+1})),e.setLikeClicked(!0));case 9:case"end":return r.stop()}}),r)})));return function(e){return s.apply(this,arguments)}}();return(0,c.jsxs)("div",{children:[(0,c.jsx)("i",{className:"fa fa-heart-o",onClick:s}),(0,c.jsx)("p",{children:e.likes})]})}},5810:function(e,t,n){n(4164);var r=n(184),s=function(e){return(0,r.jsx)("div",{className:"error_message__container",children:(0,r.jsxs)("div",{className:"error-message__modal",children:[e.errorMessage,(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"btn",onClick:e.onClose,children:"Close"})})]})})};document.getElementById("root"),t.Z=s},4312:function(e,t,n){var r=n(5861),s=n(7757),a=n.n(s),i=n(2791),l=n(3504),c=n(29),u=n(5854),o=n(654),d=n(2806),p=n(184);t.Z=function(e){var t=(0,i.useRef)(""),n=(0,i.useContext)(o.V).userData;function s(){return(s=(0,r.Z)(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.Z.post("tweets/".concat(e.tweetId,"/reply"),{text:t.current.value});case 2:if(201!==(r=n.sent).status){n.next=7;break}return e.setNewReply(r.data.id),t.current.value="",n.abrupt("return");case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,p.jsxs)("div",{className:c.Z["reply-section"],children:[(0,p.jsx)("div",{className:c.Z["close-reply__section"],children:(0,p.jsx)("i",{className:"fa fa-times","aria-hidden":"true",onClick:function(){return e.hideReply()},style:{cursor:"pointer"}})}),(0,p.jsxs)("div",{className:c.Z.user__info,children:[(0,p.jsx)("div",{className:c.Z["user-info__left"],children:(0,p.jsx)("img",{src:e.picture,alt:"Profile"})}),(0,p.jsxs)("div",{className:c.Z["user-info__right"],children:[(0,p.jsxs)("div",{className:c.Z.user__names,children:[(0,p.jsx)("p",{id:c.Z.fullname,children:"".concat(e.firstname," ").concat(e.lastname)}),(0,p.jsx)("p",{id:c.Z.username,children:e.username}),(0,p.jsx)("p",{children:"\xb7"}),(0,p.jsx)("p",{id:c.Z["time-created"],children:e.timeCreated})]}),(0,p.jsx)("div",{className:c.Z["tweet-content"],children:e.content})]})]}),(0,p.jsxs)("form",{id:"add-reply",className:c.Z["add-reply__form"],onSubmit:function(r){r.preventDefault(),n?t.current.value.trim().length>0&&function(){s.apply(this,arguments)}():e.onError((0,p.jsxs)("p",{children:["Please ",(0,p.jsx)(l.rU,{to:"/login",children:"login"})," before adding a tweet."]}))},children:[(0,p.jsxs)("div",{className:c.Z["add-reply__upper"],children:[n?(0,p.jsx)("img",{className:c.Z["add-reply__image"],src:n.picture,alt:"Default profile"}):(0,p.jsx)("img",{className:c.Z["add-reply__image"],src:u,alt:"Default profile"}),(0,p.jsx)("textarea",{className:c.Z["add-reply__input"],placeholder:"Tweet your reply",ref:t,name:"reply"})]}),(0,p.jsx)("div",{className:c.Z["add-reply__lower"],children:(0,p.jsx)("div",{className:c.Z["btn-container"],children:(0,p.jsx)("button",{className:"btn",type:"submit",children:"Reply"})})})]})]})}},1684:function(e,t,n){var r=n(5861),s=n(885),a=n(7757),i=n.n(a),l=n(2791),c=n(6871),u=n(2806),o=n(184);t.Z=function(e){var t=(0,c.s0)(),n=!!localStorage.getItem("authTokens"),a=(0,l.useState)(null),d=(0,s.Z)(a,2),p=d[0],f=d[1],m=(0,l.useState)(!1),_=(0,s.Z)(m,2),x=_[0],h=_[1],y=(0,l.useState)(!1),Z=(0,s.Z)(y,2),v=Z[0],j=Z[1],k=(0,l.useState)(null),w=(0,s.Z)(k,2),g=w[0],N=w[1],b=(0,l.useCallback)((0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.Z.get("bookmarks/".concat(e.tweetId,"/check"));case 3:200===t.sent.status&&f(!0),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.clear(),404===t.t0.response.status&&f(!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),[e.tweetId]);(0,l.useEffect)((function(){n?(h(!0),b(),j(!0)):(h(!0),j(!0))}),[g,b,n]);var R=function(){var s=(0,r.Z)(i().mark((function r(s){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s.stopPropagation(),n||t("/login"),r.next=4,u.Z.post("tweets/".concat(e.tweetId,"/create-bookmark"));case 4:201===r.sent.status&&N(Date.now());case 6:case"end":return r.stop()}}),r)})));return function(e){return s.apply(this,arguments)}}(),C=function(){var t=(0,r.Z)(i().mark((function t(n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),t.next=3,u.Z.delete("bookmarks/".concat(e.tweetId,"/delete"));case 3:204===t.sent.status&&(N(Date.now()),e.isBookmarkPage&&e.setNeedRefreshTweetList(Date.now()));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return p&&x&&v?(0,o.jsx)("i",{className:"fas fa-save fa-lg","aria-hidden":"true",onClick:C}):!p&&x&&v?(0,o.jsx)("i",{className:"far fa-save fa-lg","aria-hidden":"true",onClick:R}):void 0}},1277:function(e,t,n){var r=n(5861),s=n(7757),a=n.n(s),i=(n(2791),n(6871)),l=n(2806),c=n(184);t.Z=function(e){var t=(0,i.s0)(),n=!!localStorage.getItem("authTokens"),s=function(){var s=(0,r.Z)(a().mark((function r(s){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s.stopPropagation(),n){r.next=5;break}t("/login"),r.next=9;break;case 5:return r.next=7,l.Z.delete("remove-like/".concat(e.likeId));case 7:204===r.sent.status&&(e.setFakeLikeNumber((function(e){return e-1})),e.setLikeClicked(!1));case 9:case"end":return r.stop()}}),r)})));return function(e){return s.apply(this,arguments)}}();return(0,c.jsxs)("div",{children:[(0,c.jsx)("i",{className:"fa fa-heart",style:{color:"red"},onClick:s}),(0,c.jsx)("p",{children:e.likes})]})}},5783:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var r=n(5861),s=n(885),a=n(7757),i=n.n(a),l=n(2791),c=n(1422),u=n(5854),o=n(4569),d=n.n(o),p=n(6871),f=n(3504),m=n(2724),_=n(1689),x=n(1277),h=n(1684),y=n(5810),Z=n(2806),v=n(184),j=function(e){var t,n="/".concat(e.username),a=(0,p.s0)(),c=(0,l.useState)(!1),u=(0,s.Z)(c,2),o=u[0],d=u[1],j=(0,l.useState)(!1),k=(0,s.Z)(j,2),w=k[0],g=k[1],N=(0,l.useState)(null),b=(0,s.Z)(N,2),R=b[0],C=b[1],S=(0,l.useState)(null),I=(0,s.Z)(S,2),P=I[0],E=I[1],L=(0,l.useState)(e.likes),T=(0,s.Z)(L,2),D=T[0],M=T[1],U=!!localStorage.getItem("authTokens"),V=(0,l.useRef)(""),O=(0,l.useState)(!1),B=(0,s.Z)(O,2),F=B[0],A=B[1],H=(0,l.useState)(null),X=(0,s.Z)(H,2),Y=X[0],q=X[1],G=function(){var t=(0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g(!0),d(!0),!U){t.next=5;break}return t.next=5,Z.Z.get("like/".concat(e.tweetId,"/check")).then((function(e){200===e.status&&C((0,v.jsx)(x.Z,{likeId:e.data.id,likes:D,setFakeLikeNumber:M,setLikeClicked:E}))})).catch((function(t){C((0,v.jsx)(_.Z,{tweetId:e.tweetId,likes:D,setFakeLikeNumber:M,setLikeClicked:E}))}));case 5:d(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,l.useEffect)((function(){G()}),[P]),t=U?(0,v.jsx)("div",{children:!o&&w&&R}):(0,v.jsxs)("div",{children:[(0,v.jsx)("i",{className:"fa fa-heart-o",onClick:function(){return a("/login")}}),(0,v.jsx)("p",{children:e.likes})]});function J(){return(J=(0,r.Z)(i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z.Z.post("tweets/".concat(e.tweetId,"/reply"),{text:V.current.value});case 2:if(201!==(n=t.sent).status){t.next=7;break}return e.setNewReply(n.data.id),V.current.value="",t.abrupt("return");case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,v.jsxs)("section",{className:m.Z["tweet-detail"],children:[F&&(0,v.jsx)(y.Z,{onClose:function(){q(null),A(!1)},errorMessage:Y}),(0,v.jsx)("div",{className:m.Z["tweet-detail__top"],children:(0,v.jsxs)("div",{className:m.Z["user-info"],children:[(0,v.jsx)("div",{className:m.Z["tweet-detail__user-picture"],children:(0,v.jsx)("img",{src:e.picture,alt:"Profile"})}),(0,v.jsxs)("div",{className:m.Z["tweet-detail__user-names"],children:[(0,v.jsx)("a",{id:m.Z["user-name"],href:n,children:"".concat(e.firstname," ").concat(e.lastname)}),(0,v.jsx)("a",{id:m.Z.username,href:n,children:e.username})]})]})}),(0,v.jsx)("div",{className:m.Z["tweet-detail__middle"],children:(0,v.jsx)("p",{className:m.Z["tweet-detail__content"],children:e.content})}),(0,v.jsxs)("div",{className:m.Z["tweet-detail__bottom"],children:[(0,v.jsxs)("div",{className:m.Z["tweet-detail__btns"],children:[(0,v.jsxs)("div",{title:"Reply",className:m.Z["tweet-detail__interactive-btn"],children:[(0,v.jsx)("i",{className:"fa fa-reply",onClick:e.showReply}),(0,v.jsx)("p",{children:e.reply})]}),(0,v.jsx)("div",{title:"Like",className:m.Z["tweet-detail__interactive-btn"],children:t}),(0,v.jsx)("div",{title:"Save",className:m.Z["tweet-detail__interactive-btn"],children:(0,v.jsx)(h.Z,{tweetId:e.tweetId,setHasError:A,setErrorMessage:q})})]}),(0,v.jsx)("div",{className:m.Z["always-visible__add-reply"],children:(0,v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),U?V.current.value.trim().length>0&&function(){J.apply(this,arguments)}():e.onError((0,v.jsxs)("p",{children:["Please ",(0,v.jsx)(f.rU,{to:"/login",children:"login"})," before adding a tweet."]}))},children:[(0,v.jsx)("img",{src:e.currentUserPfp,alt:"Profile"}),(0,v.jsx)("textarea",{placeholder:"Tweet your reply",ref:V}),(0,v.jsx)("button",{className:"btn",type:"submit",children:"Reply"})]})})]})]})},k=n(4457),w=n(4312),g=n(629),N=n(29),b=function(e){var t=(0,p.s0)(),n=function(){return t("/get-profile/".concat(e.username))};return(0,v.jsxs)("div",{className:N.Z.reply,children:[(0,v.jsx)("div",{className:N.Z["reply-left"],children:(0,v.jsx)("img",{src:e.profilePicture,alt:e.fullname})}),(0,v.jsxs)("div",{className:N.Z["reply-right"],children:[(0,v.jsx)("div",{className:N.Z.reply__user,children:(0,v.jsxs)("div",{className:N.Z.user__names,children:[(0,v.jsx)("p",{onClick:n,id:N.Z.fullname,className:N.Z["link--underline"],children:e.fullname}),(0,v.jsx)("p",{onClick:n,className:N.Z["link--underline"],children:e.username}),(0,v.jsxs)("p",{children:["\xb7 ",e.timeCreated]})]})}),(0,v.jsx)("div",{className:N.Z["reply-content"],children:(0,v.jsx)("p",{children:e.text})})]})]})},R=n(6706),C=function(e){var t=(0,l.useState)([]),n=(0,s.Z)(t,2),a=n[0],c=n[1],u=(0,l.useState)(!1),o=(0,s.Z)(u,2),p=o[0],f=o[1],m=(0,l.useState)(!1),_=(0,s.Z)(m,2),x=_[0],h=_[1],y=(0,l.useState)(!1),Z=(0,s.Z)(y,2),j=Z[0],w=Z[1],g=(0,l.useContext)(R.S).serverURL,C=(0,l.useCallback)((0,r.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),h(!0),t.next=4,d().get("".concat(g,"tweets/").concat(e.tweetId,"/reply")).then((function(e){200===e.status?c(e.data):w(!0)}));case 4:f(!1);case 5:case"end":return t.stop()}}),t)}))),[e.tweetId]);return(0,l.useEffect)((function(){C()}),[C,e.newReply]),(0,v.jsxs)("section",{className:N.Z["reply-list"],children:[j&&(0,v.jsx)("p",{style:{textAlign:"center",color:"#71767b",marginTop:"1.5rem"},children:"Sorry there was an error fetching the replies, Please check your internet connection."}),!p&&x&&!j&&a.map((function(e){return(0,v.jsx)(b,{text:e.text,fullname:"".concat(e.user.firstname," ").concat(e.user.lastname),username:e.user.username,profilePicture:e.user.picture,timeCreated:(0,k.Z)(e.date_created.created_ago,e.date_created.created)},e.id)})),!j&&!p&&x&&0===a.length&&(0,v.jsx)("p",{style:{textAlign:"center",color:"#71767b",marginTop:"1.5rem"},children:"No replies yet!"})]})},S=n(654),I=function(e){var t=(0,l.useState)(null),n=(0,s.Z)(t,2),a=n[0],o=n[1],f=(0,p.UO)().tweetId,m=(0,l.useContext)(S.V).userData,_=(0,l.useState)(!1),x=(0,s.Z)(_,2),h=x[0],Z=x[1],N=(0,l.useState)(null),b=(0,s.Z)(N,2),I=b[0],P=b[1],E=(0,l.useState)(!1),L=(0,s.Z)(E,2),T=L[0],D=L[1],M=(0,l.useState)(null),U=(0,s.Z)(M,2),V=U[0],O=U[1],B=(0,l.useState)(!1),F=(0,s.Z)(B,2),A=F[0],H=F[1],X=(0,l.useState)(!1),Y=(0,s.Z)(X,2),q=Y[0],G=Y[1],J=(0,l.useContext)(R.S).serverURL,K=(0,l.useCallback)((0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d().get("".concat(J,"tweets/").concat(f));case 2:200===(t=e.sent).status&&o(t.data);case 4:case"end":return e.stop()}}),e)}))),[f,J]);(0,l.useEffect)((function(){H(!0),K(),G(!0),H(!0),K(),G(!0)}),[K,h]);var W=function(e){P(e),Z(!0)},z=function(){P(null),Z(!1)},Q=function(){D(!1),document.getElementById("add-reply__container").classList.add("hidden")};return(0,v.jsxs)(l.Fragment,{children:[(0,v.jsx)(g.Z,{onOverlayClick:function(){e.onMenuClick(),Z(!1)},isVisible:!!e.isMenuOpen}),(0,v.jsx)(g.Z,{onOverlayClick:Q,isVisible:T}),(0,v.jsx)(g.Z,{onOverlayClick:z,isVisible:h}),h&&(0,v.jsx)(y.Z,{errorMessage:I,onClose:z}),(0,v.jsxs)("div",{className:"main__middle-side",id:"homepage-middle",children:[(0,v.jsx)("section",{className:"menu-btn__section",children:(0,v.jsxs)("div",{className:"ham-menu__btn",onClick:e.onMenuClick,children:[(0,v.jsx)("div",{}),(0,v.jsx)("div",{}),(0,v.jsx)("div",{})]})}),q&&A&&a?(0,v.jsx)(j,{tweetId:f,picture:a.user.picture,content:a.content,username:a.user.username,firstname:a.user.firstname,lastname:a.user.lastname,likes:a.likes.length,timeCreated:(0,k.Z)(a.date_created.created_ago,a.date_created.created),showReply:function(){D(!0),document.getElementById("add-reply__container").classList.remove("hidden")},setNewReply:O,currentUserPfp:m?m.picture:u,onError:W}):(0,v.jsx)("p",{className:"p-info--center",children:"This tweet doesn't exist."}),a&&(0,v.jsx)("div",{id:"add-reply__container",className:"add-reply__container hidden",children:(0,v.jsx)(w.Z,{onError:W,tweetId:f,username:a.user.username,firstname:a.user.firstname,lastname:a.user.lastname,timeCreated:(0,k.Z)(a.date_created.created_ago,a.date_created.created),picture:a.user.picture,content:a.content,hideReply:Q,setNewReply:O})}),(0,v.jsx)(C,{newReply:V,tweetId:f})]}),(0,v.jsx)("div",{className:"main__right-side",children:(0,v.jsx)(c.Z,{})})]})}},29:function(e,t){t.Z={"reply-section":"Reply_reply-section__BbnCc",user__info:"Reply_user__info__UitVu","user-info__left":"Reply_user-info__left__qR7yp","user-info__right":"Reply_user-info__right__M3A23",user__names:"Reply_user__names__6lVy1","link--underline":"Reply_link--underline__IUIu6",fullname:"Reply_fullname__lqRK6","tweet-content":"Reply_tweet-content__GAg4T","add-reply__form":"Reply_add-reply__form__Y1WR7","add-reply__upper":"Reply_add-reply__upper__+Dp6b","add-reply__lower":"Reply_add-reply__lower__yX4-S","add-reply__image":"Reply_add-reply__image__MXGYn","add-reply__input":"Reply_add-reply__input__kTyOX","btn-container":"Reply_btn-container__+aEwk",hidden:"Reply_hidden__Z2HP2","reply-list":"Reply_reply-list__8iYMy",reply:"Reply_reply__4J+VP","reply-left":"Reply_reply-left__UpdBH","reply-right":"Reply_reply-right__V+8vO"}}}]);
//# sourceMappingURL=783.fca868d7.chunk.js.b86061c9ba32.map